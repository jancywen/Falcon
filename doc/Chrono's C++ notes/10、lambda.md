### 1. lambda 的形式

**[]**，术语叫“lambda 引出符”, 在 lambda 引出符后面，就可以像普通函数那样，用圆括号声明入口参数，用花括号定义函数体。

    auto f1 = [](){};      // 相当于空函数，什么也不做



### 2. lambda 的变量捕获

- **[=]** 表示按值捕获所有外部变量，表达式内部是值的拷贝，并且不能修改；

- **[&]** 是按引用捕获所有外部变量，内部以引用的方式使用，可以修改；

- 你也可以在 **[]** 里明确写出外部变量名，指定按值或者按引用捕获，C++ 在这里给予了非常大的灵活性。

```C++
int x = 33; // 一个外部变量
auto f3 = [=, &x]() // lambda表达式，用“&”按引用捕获x，其他的按值捕获
{ 
    x += 20; // x是引用，可以修改
};
```
### 3. 泛型的 lambda

```C++

auto f = [](const auto& x)        // 参数使用auto声明，泛型化
{
    return x + x;
};

cout << f(3) << endl;             // 参数类型是int
cout << f(0.618) << endl;         // 参数类型是double

string str = "matrix";
cout << f(str) << endl;          // 参数类型是string
```


总结：

* lambda 表达式是一个闭包，能够像函数一样被调用，像变量一样被传递；

* 可以使用 auto 自动推导类型存储 lambda 表达式，但 C++ 鼓励尽量就地匿名使用，缩小作用域；

* lambda 表达式使用“[=]”的方式按值捕获，使用“[&]”的方式按引用捕获，空的“[]”则是无捕获（也就相当于普通函数）；

* 捕获引用时必须要注意外部变量的生命周期，防止变量失效；

* C++14 里可以使用泛型的 lambda 表达式，相当于简化的模板函数。